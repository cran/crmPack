<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Describing crmPack Objects</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">

div.csl-bib-body { }
div.csl-entry {
clear: both;
margin-bottom: 0em;
}
.hanging div.csl-entry {
margin-left:2em;
text-indent:-2em;
}
div.csl-left-margin {
min-width:2em;
float:left;
}
div.csl-right-inline {
margin-left:2em;
padding-left:1em;
}
div.csl-indent {
margin-left: 2em;
}
</style>

<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Describing <code>crmPack</code>
Objects</h1>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Objects created by <code>crmPack</code> are almost always S4 objects.
Like all S4 objects, by default they do not render in a particularly
user-friendly way.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>cs <span class="ot">&lt;-</span> <span class="fu">CohortSizeDLT</span>(<span class="at">intervals =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">cohort_size =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>))</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>cs</span></code></pre></div>
<pre><code>#&gt; An object of class &quot;CohortSizeDLT&quot;
#&gt; Slot &quot;intervals&quot;:
#&gt; [1] 0 1 2
#&gt; 
#&gt; Slot &quot;cohort_size&quot;:
#&gt; [1] 1 3 5</code></pre>
<p>Fortunately, a little known feature of <code>knitr</code> can put
this right at little or no cost to the end user: in the simplest case,
demonstrated below, all that needs to be done is to reference the object
in a markdown or Quarto chunk.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>cs</span></code></pre></div>
<table>
<caption>
Defined by the number of toxicities so far observed
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
No of toxicities
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
5
</td>
</tr>
</tbody>
</table>
<blockquote>
<p>The <code>knit_print</code>methods provided by <code>crmPack</code>
are not intended to be fully customisable or comprehensive. We do
believe, however, that they cover the vast majority of use-cases and are
easily extended using the techniques described later in this
vignette.</p>
</blockquote>
<blockquote>
<p>Formatting of these objects currently only works for HMTL output. If
another format - such as PDF or Microsoft Word - is required, our
suggested workaround is to create the HTML output and then print or save
the document to the required format.</p>
</blockquote>
</div>
<div id="how-is-this-done" class="section level2">
<h2>How is this done?</h2>
<p>When running code at the console, the result of an R function or
statement that is not assigned to an object is
<code>print</code>ed. (Unless, of course, it is returned
<code>invisible</code>ly.) The same process appears to happen when the
chunks of a markdown or Quarto document are evaluated. But that is not
quite the case. Instead, the result is passed to an S3 function called
<code>knit_print</code> <span class="citation">(Xie 2024)</span>. It is
the results of running <code>knit_print</code> on the returned
expression that appear in the rendered document.</p>
<p>As a simple demonstration of the concept, consider:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>knit_print.DustySpringfield <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="st">&quot;I just don&#39;t know what to do with myself&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>}</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>lyric <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>lyric</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="fu">class</span>(lyric) <span class="ot">&lt;-</span> <span class="st">&quot;DustySpringfield&quot;</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>lyric</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt; I just don&#39;t know what to do with myself</span></span></code></pre></div>
<p>The actions of <code>knit_print</code> are entirely arbitrary, but
this mechanism provides developers with an easy way to provide
nicely-rendered versions of any objects that are rendered by
<code>knitr</code>. We have provided such methods for (almost) all
<code>crmPack</code> classes.</p>
</div>
<div id="using-knit_print-in-crmpack" class="section level2">
<h2>Using <code>knit_print</code> in <code>crmPack</code></h2>
<p>By default, all that needs to be done is to reference the object to
be printed in a markdown or quarto chunk. This is equivalent to
<code>knit_print(object)</code>. However, the <code>knit_print</code>
methods for most <code>crmPack</code> classes have optional arguments
that can be used to customise the way in which the object is rendered.
To change the default value of any parameter to <code>knit_print</code>
the function must be called explicitly:
<code>knit_print(cs, tox_label = &quot;DLAE&quot;)</code>.</p>
<div id="common-customisations" class="section level3">
<h3>Common customisations</h3>
<p>The most commonly needed customisations are to alter the way in which
participants and toxicities are described. These are handled by the
<code>label</code> and <code>tox_label</code> arguments to
<code>knit_print</code>.</p>
<p>These arguments can be provided either as a scalar or a vector of
length 2. If a vector, the first element is taken to describe a single
instance and the second any other number of instances. If a scalar, it
is converted to a vector, whose first element is the scalar value
provided and the second the scalar with <code>&quot;s&quot;</code> appended<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<p>So, for example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">CohortSizeConst</span>(<span class="dv">3</span>)</span></code></pre></div>
<p>A constant size of 3 participants.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">knit_print</span>(<span class="fu">CohortSizeConst</span>(<span class="dv">3</span>), <span class="at">label =</span> <span class="st">&quot;subject&quot;</span>)</span></code></pre></div>
<p>A constant size of 3 subjects.</p>
<p>Dose units are defined by the <code>units</code> parameter. By
default, no units are printed.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">Data</span>(<span class="at">doseGrid =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.9</span>, <span class="fl">2.5</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>))</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>d</span></code></pre></div>
<p>No participants are yet evaluable.</p>
<p>The dose grid is 0.1, 0.3, 0.9, 2.5, 5, 10 and 15.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">knit_print</span>(d, <span class="at">units =</span> <span class="st">&quot;mg/dL&quot;</span>)</span></code></pre></div>
<p>No participants are yet evaluable.</p>
<p>The dose grid is 0.1 mg/dL, 0.3 mg/dL, 0.9 mg/dL, 2.5 mg/dL, 5 mg/dL,
10 mg/dL and 15 mg/dL.</p>
<p>The format used to display dose levels (and other information in
other classes) can be changed with the <code>fmt</code> parameter:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">knit_print</span>(d, <span class="at">units =</span> <span class="st">&quot;mg/dL&quot;</span>, <span class="at">fmt =</span> <span class="st">&quot;%.2f&quot;</span>)</span></code></pre></div>
<p>No participants are yet evaluable.</p>
<p>The dose grid is 0.10 mg/dL, 0.30 mg/dL, 0.90 mg/dL, 2.50 mg/dL, 5.00
mg/dL, 10.00 mg/dL and 15.00 mg/dL.</p>
<p><code>biomarker_label</code> and <code>biomarker_units</code> allow
the representation of a biomarker to be customised.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">.DefaultDualEndpointRW</span>()</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>x</span></code></pre></div>
<p>The relationships between dose and toxicity and between dose and PD
biomarker will be modelled simultaneously.</p>
<p>A probit log normal model will describe the relationship between dose
and toxicity: <span class="math display">\[ \Phi^{-1}(Tox | d) = f(X = 1
| \theta, d) = \alpha + \beta \cdot log(d/d^*) \]</span>where d* denotes
a reference dose.</p>
<p>The prior for θ is given by<span class="math display">\[
\boldsymbol\theta = \begin{bmatrix}\alpha \\ \beta\end{bmatrix}\sim N
\left(\begin{bmatrix} 0.00 \\  1.00\end{bmatrix} , \begin{bmatrix} 1.00
&amp;  0.00 \\ 0.00 &amp;  1.00\end{bmatrix} \right) \]</span></p>
<p>The reference dose will be 1.00.</p>
<p>The PD biomarker response <code>w</code> at dose <code>d</code> is
modelled as <span class="math display">\[ w(d) \sim N(f(d), \sigma_w^2)
\]</span></p>
<p>where f(d) is a first order random walk such that</p>
<p><span class="math display">\[ f(d) = \beta_{W_i} - \beta_{W_{i -
1}}\sim N(0, 0.01 \times (d_i - d_{i - 1})) \]</span></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">knit_print</span>(x, <span class="at">biomarker_name =</span> <span class="st">&quot;CRP&quot;</span>, <span class="at">biomarker_units =</span> <span class="st">&quot;mg/dL&quot;</span>)</span></code></pre></div>
<p>The relationships between dose and toxicity and between dose and PD
biomarker will be modelled simultaneously.</p>
<p>A probit log normal model will describe the relationship between dose
and toxicity: <span class="math display">\[ \Phi^{-1}(Tox | d) = f(X = 1
| \theta, d) = \alpha + \beta \cdot log(d/d^*) \]</span>where d* denotes
a reference dose.</p>
<p>The prior for θ is given by<span class="math display">\[
\boldsymbol\theta = \begin{bmatrix}\alpha \\ \beta\end{bmatrix}\sim N
\left(\begin{bmatrix} 0.00 \\  1.00\end{bmatrix} , \begin{bmatrix} 1.00
&amp;  0.00 \\ 0.00 &amp;  1.00\end{bmatrix} \right) \]</span></p>
<p>The reference dose will be 1.00.</p>
<p>The PD biomarker response <code>w</code> at dose <code>d</code> is
modelled as <span class="math display">\[ w(d) \sim N(f(d), \sigma_w^2)
\]</span></p>
<p>where f(d) is a first order random walk such that</p>
<p><span class="math display">\[ f(d) = \beta_{W_i} - \beta_{W_{i -
1}}\sim N(0, 0.01 \times (d_i - d_{i - 1})) \]</span></p>
</div>
</div>
<div id="rendering-complex-classes" class="section level2">
<h2>Rendering complex classes</h2>
<p>Some <code>crmPack</code> classes have slots whose values are
themselves <code>crmPack</code> classes. <code>CohortSizeMax</code> is a
simple example. In these cases, the slot values are each passed to
<code>knit_print</code> in turn.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">.DefaultCohortSizeMax</span>()</span></code></pre></div>
The maximum of the cohort sizes defined in the following rules:
<table>
<caption>
Defined by the dose to be used in the next cohort
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Dose
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<table>
<caption>
Defined by the number of toxicities so far observed
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
No of toxicities
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<p><code>knit_print</code> methods for sub-classes of
<code>RuleDesign</code> (and related classes) offer slightly more
control. Here, an overall header for the rendition of the object is
provided by the <code>title</code> parameter (whose value defaults to
“Design” and the slot values are separated by sub-headers. The styling
of the overall header and sub-headers is controlled by the
<code>level</code> parameter. The default value of <code>level</code> is
<code>2L</code>, and the level of slots is defined recursively to be one
more than the level of the parent slot<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. Class-specific
parameters are passed to slot-specific <code>knit_print</code> methods
using <code>...</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">knit_print</span>(<span class="fu">.DefaultDesign</span>())</span></code></pre></div>
</div>
<div id="design" class="section level2">
<h2>Design</h2>
<div id="dose-toxicity-model" class="section level3">
<h3>Dose toxicity model</h3>
<p>A logistic log normal model will describe the relationship between
dose and toxicity: <span class="math display">\[ p(Tox | d) = f(X = 1 |
\theta, d) = \frac{e^{\alpha + \beta \cdot log(d/d_{ref})}}{1 +
e^{\alpha + \beta \cdot log(d/d_{ref})}} \]</span>where d<sub>ref</sub>
denotes a reference dose.</p>
<p>The prior for θ is given by<span class="math display">\[
\boldsymbol\theta = \begin{bmatrix}\alpha \\ log(\beta)\end{bmatrix}\sim
N \left(\begin{bmatrix}-0.85 \\  1.00\end{bmatrix} , \begin{bmatrix}
1.00 &amp; -0.50 \\ -0.50 &amp;  1.00\end{bmatrix} \right) \]</span></p>
<p>The reference dose will be 56.00.</p>
</div>
<div id="stopping-rule" class="section level3">
<h3>Stopping rule</h3>
<p>If either of the following rules are <code>TRUE</code>:</p>
<ul>
<li><p>If both of the following rules are <code>TRUE</code>:</p>
<ul>
<li><p>≥ 3 cohorts dosed: If 3 or more cohorts have been
treated.</p></li>
<li><p>P(0.2 ≤ prob(DLE | NBD) ≤ 0.35) ≥ 0.5: If the probability of
toxicity at the next best dose is in the range [0.20, 0.35] is at least
0.50.</p></li>
</ul></li>
<li><p>≥ 20 patients dosed: If 20 or more participants have been
treated.</p></li>
</ul>
</div>
<div id="escalation-rule" class="section level3">
<h3>Escalation rule</h3>
<table>
<caption>
Defined by highest dose administered so far
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Dose
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Min
</th>
<th style="text-align:right;">
Max
</th>
<th style="text-align:right;">
Increment
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
0.33
</td>
</tr>
</tbody>
</table>
</div>
<div id="use-of-placebo" class="section level3">
<h3>Use of placebo</h3>
<p>Placebo will not be administered in the trial.</p>
</div>
<div id="dose-recommendation" class="section level3">
<h3>Dose recommendation</h3>
<p>The dose recommended for the next cohort will be chosen in the
following way. First, doses that are ineligible according to the
increments rule will be discarded. Next, any dose for which the mean
posterior probability of toxicity being in the overdose range - (0.35,
1] - is 0.25 or more will also be discarded. Finally, the dose amongst
those remaining which has the highest chance that the mean posterior
probability of toxicity is in the target toxicity range of 0.2 to 0.35
(inclusive) will be selected.</p>
</div>
<div id="cohort-size" class="section level3">
<h3>Cohort size</h3>
The maximum of the cohort sizes defined in the following rules:
<table>
<caption>
Defined by the dose to be used in the next cohort
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Dose
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<table>
<caption>
Defined by the number of toxicities so far observed
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
No of toxicities
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
</div>
<div id="observed-data" class="section level3">
<h3>Observed data</h3>
<p>No participants are yet evaluable.</p>
<p>The dose grid is 1, 3, 5, 10, 15, 20, 25, 40, 50, 80 and 100.</p>
</div>
<div id="starting-dose" class="section level3">
<h3>Starting dose</h3>
<p>The starting dose is 3.</p>
<p>Slot headers can be customised using the <code>sections</code>
parameter. <code>sections</code> should be a named vector. Names should
be valid slot names for the object being rendered and values the
requested slot headers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">knit_print</span>(</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="fu">.DefaultDesign</span>(),</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="at">level =</span> <span class="dv">4</span>,</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="at">sections =</span> <span class="fu">c</span>(</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>    <span class="st">&quot;nextBest&quot;</span> <span class="ot">=</span> <span class="st">&quot;Selection of the dose for the following cohort&quot;</span>,</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>    <span class="st">&quot;startingDose&quot;</span> <span class="ot">=</span> <span class="st">&quot;Initial dose&quot;</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>  )</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>)</span></code></pre></div>
<p><span class="math display">\[Output not shown.\]</span></p>
<blockquote>
<p>It is not possible to omit slots from the rendition of a
<code>crmPack</code> object. If you need to do this, you can either
render the required slots individually, or override the definition of
<code>knit_print</code> for the super class as demonstrated below.</p>
</blockquote>
</div>
</div>
<div id="restoring-console-like-behaviour" class="section level2">
<h2>Restoring console-like behaviour</h2>
<p>To restore the default behaviour for <code>crmPack</code> objects,
simply wrap the object in a call to <code>normal_print()</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">normal_print</span>(cs)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="co">#&gt; An object of class &quot;CohortSizeDLT&quot;</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="co">#&gt; Slot &quot;intervals&quot;:</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co">#&gt; [1] 0 1 2</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co">#&gt; Slot &quot;cohort_size&quot;:</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co">#&gt; [1] 1 3 5</span></span></code></pre></div>
</div>
<div id="accessing-the-output-of-knit_print" class="section level2">
<h2>Accessing the output of <code>knit_print</code></h2>
<p>One of the parameters of <code>knitr::knit_print</code> is
<code>asis</code>, with a default value of <code>TRUE</code>.
<code>asis</code> has the same effect as setting the chunk option
<code>output</code> to <code>asis</code>. This is achieved by returning
an object of class <code>knit-asis</code>.</p>
<p>Setting <code>asis</code> to <code>FALSE</code> will display the raw
HTML code generated by <code>knit_print</code> to be displayed.
Alternatively, it may allow easier manipulation of the return value.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>csOutput1 <span class="ot">&lt;-</span> <span class="fu">knit_print</span>(<span class="fu">CohortSizeDLT</span>(<span class="at">intervals =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">cohort_size =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)))</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">class</span>(csOutput1)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;knit_asis&quot;</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>csOutput1</span></code></pre></div>
<table>
<caption>
Defined by the number of toxicities so far observed
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
No of toxicities
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
5
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>csOutput2 <span class="ot">&lt;-</span> <span class="fu">knit_print</span>(<span class="fu">CohortSizeDLT</span>(<span class="at">intervals =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">cohort_size =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)), <span class="at">asis =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="fu">class</span>(csOutput2)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;character&quot;</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>csOutput2</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;&lt;table&gt;\n&lt;caption&gt;Defined by the number of toxicities so far observed&lt;/caption&gt;\n &lt;thead&gt;\n&lt;tr&gt;\n&lt;th style=\&quot;border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \&quot; colspan=\&quot;2\&quot;&gt;&lt;div style=\&quot;border-bottom: 1px solid #ddd; padding-bottom: 5px; \&quot;&gt;No of toxicities&lt;/div&gt;&lt;/th&gt;\n&lt;th style=\&quot;empty-cells: hide;border-bottom:hidden;\&quot; colspan=\&quot;1\&quot;&gt;&lt;/th&gt;\n&lt;/tr&gt;\n  &lt;tr&gt;\n   &lt;th style=\&quot;text-align:right;\&quot;&gt; Lower &lt;/th&gt;\n   &lt;th style=\&quot;text-align:right;\&quot;&gt; Upper &lt;/th&gt;\n   &lt;th style=\&quot;text-align:right;\&quot;&gt; Cohort size &lt;/th&gt;\n  &lt;/tr&gt;\n &lt;/thead&gt;\n&lt;tbody&gt;\n  &lt;tr&gt;\n   &lt;td style=\&quot;text-align:right;\&quot;&gt; 0 &lt;/td&gt;\n   &lt;td style=\&quot;text-align:right;\&quot;&gt; 1 &lt;/td&gt;\n   &lt;td style=\&quot;text-align:right;\&quot;&gt; 1 &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n   &lt;td style=\&quot;text-align:right;\&quot;&gt; 1 &lt;/td&gt;\n   &lt;td style=\&quot;text-align:right;\&quot;&gt; 2 &lt;/td&gt;\n   &lt;td style=\&quot;text-align:right;\&quot;&gt; 3 &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n   &lt;td style=\&quot;text-align:right;\&quot;&gt; 2 &lt;/td&gt;\n   &lt;td style=\&quot;text-align:right;\&quot;&gt; Inf &lt;/td&gt;\n   &lt;td style=\&quot;text-align:right;\&quot;&gt; 5 &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n\n&quot;</span></span></code></pre></div>
<p>But with the chunk option <code>output</code> set to
<code>asis</code>…</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">cat</span>(csOutput2)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co">#&gt; &lt;table&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="co">#&gt; &lt;caption&gt;Defined by the number of toxicities so far observed&lt;/caption&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co">#&gt;  &lt;thead&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="co">#&gt; &lt;tr&gt;</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="co">#&gt; &lt;th style=&quot;border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; &quot; colspan=&quot;2&quot;&gt;&lt;div style=&quot;border-bottom: 1px solid #ddd; padding-bottom: 5px; &quot;&gt;No of toxicities&lt;/div&gt;&lt;/th&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="co">#&gt; &lt;th style=&quot;empty-cells: hide;border-bottom:hidden;&quot; colspan=&quot;1&quot;&gt;&lt;/th&gt;</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="co">#&gt; &lt;/tr&gt;</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="co">#&gt;   &lt;tr&gt;</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="co">#&gt;    &lt;th style=&quot;text-align:right;&quot;&gt; Lower &lt;/th&gt;</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co">#&gt;    &lt;th style=&quot;text-align:right;&quot;&gt; Upper &lt;/th&gt;</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="co">#&gt;    &lt;th style=&quot;text-align:right;&quot;&gt; Cohort size &lt;/th&gt;</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="co">#&gt;   &lt;/tr&gt;</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="co">#&gt;  &lt;/thead&gt;</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="co">#&gt; &lt;tbody&gt;</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="co">#&gt;   &lt;tr&gt;</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="co">#&gt;    &lt;td style=&quot;text-align:right;&quot;&gt; 0 &lt;/td&gt;</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="co">#&gt;    &lt;td style=&quot;text-align:right;&quot;&gt; 1 &lt;/td&gt;</span></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a><span class="co">#&gt;    &lt;td style=&quot;text-align:right;&quot;&gt; 1 &lt;/td&gt;</span></span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a><span class="co">#&gt;   &lt;/tr&gt;</span></span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a><span class="co">#&gt;   &lt;tr&gt;</span></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a><span class="co">#&gt;    &lt;td style=&quot;text-align:right;&quot;&gt; 1 &lt;/td&gt;</span></span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a><span class="co">#&gt;    &lt;td style=&quot;text-align:right;&quot;&gt; 2 &lt;/td&gt;</span></span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a><span class="co">#&gt;    &lt;td style=&quot;text-align:right;&quot;&gt; 3 &lt;/td&gt;</span></span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a><span class="co">#&gt;   &lt;/tr&gt;</span></span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a><span class="co">#&gt;   &lt;tr&gt;</span></span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a><span class="co">#&gt;    &lt;td style=&quot;text-align:right;&quot;&gt; 2 &lt;/td&gt;</span></span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a><span class="co">#&gt;    &lt;td style=&quot;text-align:right;&quot;&gt; Inf &lt;/td&gt;</span></span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a><span class="co">#&gt;    &lt;td style=&quot;text-align:right;&quot;&gt; 5 &lt;/td&gt;</span></span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a><span class="co">#&gt;   &lt;/tr&gt;</span></span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a><span class="co">#&gt; &lt;/tbody&gt;</span></span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a><span class="co">#&gt; &lt;/table&gt;</span></span></code></pre></div>
</div>
<div id="sec-override" class="section level2">
<h2>Providing your own <code>knit_print</code> method</h2>
<p>If the methods provided in <code>crmPack</code> don’t do what you
want, it’s easy to roll your own, using standard S3 techniques.</p>
<p>The formal arguments to <code>knitr::knit_print</code> are
<code>x</code> and <code>...</code>. Additional arguments can be added
after <code>...</code>.</p>
<p>As an example, consider <code>knit_print.NextBestNCRM</code>, which
currently returns a paragraph of text:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">.DefaultNextBestNCRM</span>()</span></code></pre></div>
<p>The dose recommended for the next cohort will be chosen in the
following way. First, doses that are ineligible according to the
increments rule will be discarded. Next, any dose for which the mean
posterior probability of toxicity being in the overdose range - (0.35,
1] - is 0.25 or more will also be discarded. Finally, the dose amongst
those remaining which has the highest chance that the mean posterior
probability of toxicity is in the target toxicity range of 0.2 to 0.35
(inclusive) will be selected.</p>
<p>You might feel this is better presented as a bulleted list. You can
achieve this as follows<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>knit_print.NextBestNCRM <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">asis_output</span>(</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>      <span class="st">&quot;The dose recommended for the next cohort will be chosen in the following &quot;</span>,</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>      <span class="st">&quot;way.</span><span class="sc">\n\n</span><span class="st">-  First, doses that are ineligible according to the increments rule &quot;</span>,</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>      <span class="st">&quot;will be discarded.</span><span class="sc">\n</span><span class="st">-  Next, any dose for which the mean posterior probability of &quot;</span>,</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>      <span class="st">&quot; toxicity being in the overdose range - (&quot;</span>,</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>      x<span class="sc">@</span>overdose[<span class="dv">1</span>], <span class="st">&quot;, &quot;</span>, x<span class="sc">@</span>overdose[<span class="dv">2</span>],</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>      <span class="st">&quot;] - is &quot;</span>,</span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>      x<span class="sc">@</span>max_overdose_prob,</span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>      <span class="st">&quot; or more will also be discarded.</span><span class="sc">\n</span><span class="st">-  Finally, the dose amongst those remaining &quot;</span>,</span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>      <span class="st">&quot;which has the highest chance that the mean posterior probability of toxicity &quot;</span>,</span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>      <span class="st">&quot;is in the target toxicity range of &quot;</span>,</span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>      x<span class="sc">@</span>target[<span class="dv">1</span>],</span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>      <span class="st">&quot; to &quot;</span>,</span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a>      x<span class="sc">@</span>target[<span class="dv">2</span>],</span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a>      <span class="st">&quot; (inclusive) will be selected.</span><span class="sc">\n\n</span><span class="st">&quot;</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a>    )</span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a>  )</span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a>}</span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a><span class="fu">registerS3method</span>(<span class="st">&quot;knit_print&quot;</span>, <span class="st">&quot;NextBestNCRM&quot;</span>, knit_print.NextBestNCRM)</span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a></span>
<span id="cb20-23"><a href="#cb20-23" tabindex="-1"></a><span class="fu">.DefaultNextBestNCRM</span>()</span></code></pre></div>
<p>The dose recommended for the next cohort will be chosen in the
following way.</p>
<ul>
<li>First, doses that are ineligible according to the increments rule
will be discarded.</li>
<li>Next, any dose for which the mean posterior probability of toxicity
being in the overdose range - (0.35, 1] - is 0.25 or more will also be
discarded.</li>
<li>Finally, the dose amongst those remaining which has the highest
chance that the mean posterior probability of toxicity is in the target
toxicity range of 0.2 to 0.35 (inclusive) will be selected.</li>
</ul>
</div>
<div id="class-coverage" class="section level2">
<h2>Class coverage</h2>
<p><code>crmPack</code> defines 125 classes. Custom
<code>knit_print</code> methods exist for 92 of them. Of the remaining
33 classes, 22 are virtual classes that will never be directly
instantiated by end users. That leaves 11 classes for which
<code>knit_print</code> methods may be useful. These classes are listed
below.</p>
<table>
<thead>
<tr class="header">
<th align="left">Class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">DualSimulationsSummary</td>
</tr>
<tr class="even">
<td align="left">NextBestEWOC</td>
</tr>
<tr class="odd">
<td align="left">Simulations</td>
</tr>
<tr class="even">
<td align="left">StoppingExternal</td>
</tr>
<tr class="odd">
<td align="left">DualSimulations</td>
</tr>
<tr class="even">
<td align="left">GeneralSimulations</td>
</tr>
<tr class="odd">
<td align="left">Samples</td>
</tr>
<tr class="even">
<td align="left">DASimulations</td>
</tr>
<tr class="odd">
<td align="left">IncrementsMaxToxProb</td>
</tr>
<tr class="even">
<td align="left">EffFlexi</td>
</tr>
<tr class="odd">
<td align="left">McmcOptions</td>
</tr>
</tbody>
</table>
<p>The majority of these classes relate to simulation of the operating
characteristics of CRM trials. Reporting of this information is likely
to need customisation that is beyond the scope of a simple function<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>.</p>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Xie2024" class="csl-entry">
Xie, Yihui. 2024. <span>“Custom Print Methods.”</span> <a href="https://CRAN.R-project.org/package=knitr/vignettes/knit_print.html">https://CRAN.R-project.org/package=knitr/vignettes/knit_print.html</a>.
</div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>Except for <code>tox_label = &quot;toxicity&quot;</code>, which
becomes <code>tox_label = c(&quot;toxicity&quot;, &quot;toxicities&quot;)</code>.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Because markdown header styles are defined only for six
levels, the greatest value for <code>level</code>, including values
generated by nested calls, is <code>6</code>.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>For simplicity, the <code>tox_label</code> and
<code>asis</code> parameters, which are defined in the current
implementation of the function, are omitted in this custom
implementation. They should be preserved in any “real world”
customisation.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>The <code>crmPack</code> team is considering the
creation of markdown or Quarto templates that may assist in this area,
but consider this to be a long-term ambition.<a href="#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
